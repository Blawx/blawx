<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

    <title>Blawx - Drag and Drop Legal AI</title>


    <link href="sb-admin-2.min.css" rel="stylesheet">

    <link href="all.min.css" rel="stylesheet" type="text/css">
    <!-- Custom fonts for this template-->
    <link href="https://fonts.googleapis.com/css2?family=Mina:wght@700&amp;display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@500&amp;display=swap" rel="stylesheet">
    <style type="text/css">
        #blawxlogo
{
     font-family: 'Mina', sans-serif;
     font-size:xx-large;
     color: #5a005a;
     
}
    #blawxWordMark{
        font-family: 'IBM Plex Sans', sans-serif;
    }

    .preformatted{
        font-family: monospace;
        white-space: pre;
    }
    

    </style>

</head>
<body>
    <div class="container-fluid d-flex flex-column" style="min-height: 100vh;">
        <div id="header" class="col-12">
            <nav class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow">


                <div class="sidebar-brand-text mx-3" id="blawxlogo">ยง<span id="blawxWordMark">Blawx</span></div>

            </nav>
        </div>
        <div class="row flex-grow-1 d-flex">
            <div id="interface" class="col-8 flex-grow-1 d-flex">
                <div class="col-12">

                    <div class="card shadow mb-4" style="min-height: 90%;">
                        <div class="card-body d-flex">
                            <div id="blocklyArea" class="flex-grow-1"></div>
                            <div id="blocklyDiv" style="position: absolute"></div>
                            <!-- <div>
                            <textarea rows=2 name="output" id="output" readonly></textarea>
                        </div> -->
                        </div>
                    </div>

                </div>
            </div>
            <div class="col-4 flex-grow-1">
                <div class="card shadow mb-4" style="min-height: 90%;">
                    <div id="output" class=" card-body d-flex preformatted">
                        Results would go here.
                    </div>
                </div>
            </div>
        </div>
            <!-- buttons -->
        <div class="col-12">
            <div class="col-12">
                <a href="javascript:void(0);" class="btn btn-secondary btn-icon-split" onclick="getLoadFile()">
                    <span class="icon text-white-50">
                        <i class="fas fa-upload"></i>
                    </span>
                    <span class="text">Load Workspace</span>
                </a>
                <a href="javascript:void(0);" class="btn btn-primary btn-icon-split" onclick="exportBlocks()">
                    <span class="icon text-white-50">
                        <i class="fas fa-download"></i>
                    </span>
                    <span class="text">Save Workspace</span>
                </a>
                <a href="javascript:void(0);" class="btn btn-danger btn-icon-split" onclick="clearBlocks()">
                    <span class="icon text-white-50">
                        <i class="fas fa-trash"></i>
                    </span>
                    <span class="text">Clear Workspace</span>
                </a>
                <a href="javascript:void(0);" class="btn btn-success btn-icon-split" onclick="runCode()">
                    <span class="icon text-white-50">
                        <i class="fas fa-play"></i>
                    </span>
                    <span class="text">Run Blawx Code</span>
                </a>
                <a href="/docs/" target=_blank class="btn btn-warning btn-icon-split">
                    <span class="icon text-white-50">
                        <i class="fas fa-question"></i>
                    </span>
                    <span class="text">Help</span>
                </a>
            </div>
        </div>
        <div id="footer" class="col-12">
            <footer class="sticky-footer bg-white">
                <div class="container my-auto">
                    <div class="copyright text-center my-auto">
                        <span>Copyright &copy; Lexpedite Legal Technologies Ltd. 2021</span>
                    </div>
                </div>
            </footer>
        </div>
    <script src="jquery.min.js"></script>
    <script src="bootstrap.bundle.min.js"></script>

    <!-- Core plugin JavaScript-->
    <script src="jquery.easing.min.js"></script>

    <!-- Custom scripts for all pages-->
    <script src="sb-admin-2.min.js"></script>

    <script src="/blockly/blockly_compressed.js"></script>
    <script src="/blockly/javascript_compressed.js"></script>
    <script src="/blockly/blocks_compressed.js"></script>
    <script src="/blockly/msg/js/en.js"></script>
    <script src="/blockly/appengine/storage.js"></script>
    <script src="blawx-blocks.js"></script>

    <xml xmlns="http://www.w3.org/1999/xhtml" id="toolbox" style="display: none;">
        <category name="Facts, Rules, Queries" colour="#805ba5">
        <block type="fact"></block>
        <block type="rule">
            <field name="rule_name">name</field>
        </block>
        <block type="query"></block>
        <block type="override">
            <field name="first_rule">rule name</field>
            <field name="second_rule">rule name</field>
        </block>
        <block type="import_ruleset"></block>
        <block type="abducibility"></block>
        <block type="constraint"></block>
        </category>
        <sep></sep>
        <category name="Categories" colour="#a55b5b">
        <block type="declare_type">
            <field name="type_name">default</field>
        </block>
        <block type="declare_type_with_attributes"></block>
        <block type="cardinality_any">
            <field name="attribute_name">name</field>
        </block>
        <block type="cardinality_up_to">
            <field name="attribute_name">name</field>
        </block>
        <block type="cardinality_or_more">
            <field name="attribute_name">name</field>
        </block>
        <block type="cardinality_exactly">
            <field name="attribute_name">name</field>
        </block>
        <block type="cardinality_between">
            <field name="attribute_name">name</field>
        </block>
        <block type="declare_type_is_type"></block>
        <block type="custom_attribute_declaration"></block>
        </category>
        <category name="Known Categories" custom="KNOWN_CATEGORIES" colour="#a55b5b"></category>
        <sep></sep>
        <category name="Data Types" colour="#5ba593">
        <block type="boolean_datatype"></block>
        <block type="number_datatype"></block>
        <block type="string_datatype"></block>
    </category>
        <category name="Data Values" colour="#5ba5a5">
            <category name="Yes / No"></label>
                <block type="boolean_value">
                <field name="value">true</field>
                </block>
            </category>
            <category name="Number"></label>
                <block type="math_number">
                <field name="NUM">0</field>
                </block>
                <block type="math_operator"></block>
                <block type="calculation"></block>
                <block type="constraint_comparison"></block>
            </category>
            <category name="Text"></label>
                <block type="blawx_string">
                </block>
            </category>
        </category>
        <sep></sep>
        <category name="Objects" custom="NEW_OBJECTS" colour="#5b5ba5"></category>
        <category name="Known Objects" custom='KNOWN_OBJECTS' colour="#5b5ba5">
        </category>
        <sep></sep>
        <category name="Known Attributes" custom="KNOWN_ATTRIBUTES" colour="#5BA65B"></category>
        <sep></sep>
        <category name="Data" colour="#A55B5B">
        <block type="data_property"></block>
        <block type="data_dictionary"></block>
        <block type="kvp_basic"></block>
        <block type="data_dictionary_sub"></block>
        </category>
        <sep></sep>
        <category name="Logic" colour="#a55b93">
        <block type="conjunction"></block>
        <!--<block type="disjunction"></block>-->
        <!--<block type="negation"></block>-->
        <block type="naf_negation"></block>
        <!--<block type="implication">
            <field name="implication type">implies_1</field>
        </block>
        <block type="quantifier">
            <field name="quantifier_type">exists</field>
        </block>-->
        <block type="comparitor">
            <field name="comparitor">lt</field>
        </block>
        </category>
        <sep></sep>
        <category name="Variables" colour="#a5a55b">
        <block type="variable_selector">
            <field name="variable_selected">A</field>
        </block>
        <block type="silent_variable_selector">
            <field name="variable_selected">A</field>
        </block>
        <block type="unnamed_variable"></block>
        <block type="assignment"></block>
        </category>
        <sep></sep>
        
        
    </xml>
  
    <script src="mutators.js"></script>
    <script>
        var blocklyArea = document.getElementById('blocklyArea');
        var blocklyDiv = document.getElementById('blocklyDiv');
        var demoWorkspace = Blockly.inject(blocklyDiv,
            {media: '../../media/',
            toolbox: document.getElementById('toolbox')});
        var importWorkspace = new Blockly.Workspace();
        var onresize = function(e) {
            // Compute the absolute coordinates and dimensions of blocklyArea.
            // var element = blocklyArea;
            // var x = 0;
            // var y = 0;
            // do {
            //     x += element.offsetLeft;
            //     y += element.offsetTop;
            //     element = element.offsetParent;
            // } while (element);
            // Position blocklyDiv over blocklyArea.
            blocklyDiv.style.left = '15px';
            blocklyDiv.style.top = '15px';
            blocklyDiv.style.width = blocklyArea.offsetWidth + 'px';
            blocklyDiv.style.height = blocklyArea.offsetHeight + 'px';
            Blockly.svgResize(demoWorkspace);
            };
            window.addEventListener('resize', onresize, false);
            onresize();
            Blockly.svgResize(demoWorkspace);
            window.setTimeout(BlocklyStorage.restoreBlocks, 0);
            BlocklyStorage.backupOnUnload();

            const queryString = window.location.search;
            const urlParams = new URLSearchParams(queryString);
            if (urlParams.has('load')) {
                xhttp = new XMLHttpRequest();
                loadfile = urlParams.get('load');
                xhttp.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        var xml = Blockly.Xml.textToDom(this.responseText);
                        demoWorkspace.clear();
                        Blockly.Xml.domToWorkspace(xml, demoWorkspace);
                    }
                };
                xhttp.open("GET",loadfile,true);
                xhttp.send();
        }
    </script>
    <script src="buttons.js"></script>
    <script src="categories.js"></script>
    <script src="import.js"></script>
    <script src="attributes.js"></script>
    
    <div>
      <input id="loadfile"  onchange="loadBlocksFile(this)" type="file" accept=".blawx" hidden/>
    </div>
    <div>
      <input id="importfile" onchange="importBlocksFile(this)" type="file" accept=".blawx" hidden />
    </div>
    

</body>